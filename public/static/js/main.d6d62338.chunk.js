(this["webpackJsonpreact-plus-node"]=this["webpackJsonpreact-plus-node"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n.n(c),i=n(22),o=n.n(i),s=(n(85),n(45)),l=n(32),u=n.n(l),b=n(49),j=n(12),d=n(133),p=n(134),h=n(135),f=n(132),O=Object(f.a)({title:{flexGrow:1}}),x=function(){var e=O();return Object(a.jsx)(d.a,{position:"static",children:Object(a.jsx)(p.a,{children:Object(a.jsx)(h.a,{variant:"h6",className:e.title,children:"Header"})})})},m=n(136),g=(Object(f.a)((function(e){return{footer:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}}})),Object(f.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,padding:e.spacing(4,0)}}}))),v=function(e){var t=g();return Object(a.jsx)(m.a,{maxWidth:"lg",className:t.root,children:e.children})},y=n(43),w=n(150),S=n(137),k=n(138),C=n(139),N=n(149),T=Object(f.a)((function(e){return Object(w.a)({root:Object(y.a)({margin:"".concat(e.spacing(2)," 0"),display:"flex",height:"100%"},e.breakpoints.down(480),{flexDirection:"column",alignItems:"center",textAlign:"center"}),details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{height:150,width:150,minWidth:150,minHeight:150},chip:{margin:"5px 5px 0 0",maxWidth:"80%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box"}})})),B=function(e){var t=e.photo,n=T(),c=t.id,r=(t.farm,t.server),i=t.secret,o=t.title,s=(t.description,t.tags),l="https://live.staticflickr.com/".concat(r,"/").concat(c,"_").concat(i,"_q.jpg"),u=s?s.split(" "):[];return Object(a.jsxs)(S.a,{className:n.root,children:[Object(a.jsx)(k.a,{className:n.cover,image:l,title:o}),Object(a.jsx)("div",{className:n.details,children:Object(a.jsxs)(C.a,{className:n.content,children:[Object(a.jsx)(h.a,{component:"div",variant:"subtitle1",children:o}),u.map((function(e){return Object(a.jsx)(N.a,{variant:"outlined",color:"primary",label:e,size:"small",className:n.chip},e)}))]})})]})},D=n(142),E=n(69),F=n(146),W=n(140),I=n(35),L=n.n(I),P=n(56),V=n.n(P);var A=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,marginBottom:e.spacing(4)}}})),z=[{id:0,label:"Recent",icon:Object(a.jsx)(V.a,{}),type:"recent"},{id:1,label:"Search",icon:Object(a.jsx)(L.a,{}),type:"search"}],G=function(e){var t=e.onChangeSelectedTab,n=A(),c=r.a.useState(0),i=Object(j.a)(c,2),o=i[0],s=i[1];return Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)(d.a,{position:"static",color:"default",children:Object(a.jsx)(F.a,{value:o,onChange:function(e,n){var a=z.find((function(e){return e.id===n}));a&&t(a.type),s(n)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"gallery tabs",children:z.map((function(e){var t,n=e.id,c=e.icon,r=e.label,i=e.type;return Object(a.jsx)(W.a,Object(E.a)({icon:c,label:r},{id:"gallery-tab-".concat(t=n),"aria-controls":"gallery-tabpanel-".concat(t)}),i)}))})})})},H=n(141),J=n(75),Q=n(147),R=n(145),_=Object(f.a)((function(e){return{root:{marginBottom:e.spacing(1),padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.7)"},input:{marginLeft:e.spacing(1),flex:1,color:e.palette.primary.main},iconButton:{padding:10,color:e.palette.primary.main}}})),q=function(e){var t=e.searchAction,n=e.placeholder,r=e.liveSearch,i=_(),o=Object(c.useState)(""),s=Object(j.a)(o,2),l=s[0],u=s[1],b=Object(c.useState)(null),d=Object(j.a)(b,2),p=d[0],f=d[1],O=r?function(e){var n=e.target.value;p&&clearTimeout(p),u(n),f(setTimeout((function(){t(n)}),300))}:function(e){var t=e.target.value;u(t)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(J.a,{component:"form",className:i.root,onSubmit:function(e){if(!l)return!1;e.preventDefault(),t(l)},children:[Object(a.jsx)(H.a,{type:"submit",className:i.iconButton,"aria-label":"search",disabled:!l,children:Object(a.jsx)(L.a,{})}),Object(a.jsx)(Q.a,{onChange:O,className:i.input,placeholder:n,value:l})]}),Object(a.jsxs)(R.a,{p:2,children:["P.S: according to docs photos who's",Object(a.jsx)(h.a,{color:"secondary",component:"span",children:" title, description or tags "}),"contain the text will be returned. "]})]})},M=function(e){var t=e.images,n=e.selectedTab,c=e.onChangeSelectedTab,r=e.onChangeSearchQuery;return Object(a.jsxs)(m.a,{maxWidth:"lg",children:[Object(a.jsx)(G,{onChangeSelectedTab:c}),"search"===n&&Object(a.jsx)(q,{placeholder:"Search for cats...",liveSearch:!0,searchAction:r}),Object(a.jsx)(D.a,{container:!0,spacing:2,children:t.map((function(e){return Object(a.jsx)(D.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(B,{photo:e})},e.id)}))})]})},K=n(143),U=n(70),X=n.n(U),Y=Object(f.a)((function(e){return Object(w.a)({wrapper:{height:100,display:"flex",alignItems:"center"},loader:{width:"100%"}})})),Z=X()((function(e){var t=e.visible,n=e.onBecomeVisible,r=e.inViewport,i=e.forwardedRef,o=Y();return Object(c.useEffect)((function(){r&&n()}),[r]),Object(a.jsx)(m.a,{maxWidth:"lg",children:Object(a.jsx)("div",{className:o.wrapper,ref:i,children:Object(a.jsx)(K.a,{className:o.loader,hidden:!t})})})})),$=n(71),ee=n.n($),te=function(e){var t=e.type,n=e.page,a=e.text,c=e.maxDate;return ee.a.get("/api/photos?type=".concat(t,"&page=").concat(n,"&text=").concat(a,"&maxDate=").concat(c)).then((function(e){return e.data}))},ne=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)("recent"),o=Object(j.a)(i,2),l=o[0],d=o[1],p=Object(c.useState)([]),h=Object(j.a)(p,2),f=h[0],O=h[1],m=Object(c.useState)(""),g=Object(j.a)(m,2),y=g[0],w=g[1],S=Object(c.useState)(0),k=Object(j.a)(S,2),C=k[0],N=k[1],T=Object(c.useState)(Date.now()),B=Object(j.a)(T,2),D=B[0],E=B[1],F=Object(c.useState)(!1),W=Object(j.a)(F,2),I=W[0],L=W[1],P=Object(c.useState)(!1),V=Object(j.a)(P,2),A=V[0],z=V[1];Object(c.useEffect)((function(){console.log("date: "+D)}),[D]),Object(c.useEffect)((function(){A&&(E(Date.now()),G(!0,!0,!0))}),[l]),Object(c.useEffect)((function(){A&&G(!0,!1,!0)}),[y]),Object(c.useEffect)((function(){return window.addEventListener("scroll",J),z(!0),function(){window.removeEventListener("scroll",J)}}),[]);var G=function(){var e=Object(b.a)(u.a.mark((function e(){var t,a,c,r,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],a=i.length>1&&void 0!==i[1]&&i[1],c=i.length>2&&void 0!==i[2]&&i[2],I||n){e.next=7;break}return r=t?1:C+1,e.next=7,H({type:l,page:r,text:a?"":y,maxDate:D,resetPhotos:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a,c,i,o,b,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),y||"search"!==l){e.next=8;break}L(!1),N(C),O([]),e.next=14;break;case 8:return e.next=10,te(t);case 10:n=e.sent,a=n.stat,c=n.photos,"ok"===a&&(i=c.page,o=c.pages,b=c.photo,j="recent"===l?b.filter((function(e){return 0===f.filter((function(t){return t.id===e.id})).length})):b,L(i===o),N(i),O(t.resetPhotos?Object(s.a)(b):[].concat(Object(s.a)(f),Object(s.a)(j))));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:return e.prev=19,r(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e){console.log("scroll event")},Q=!y&&"search"===l;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{}),Object(a.jsxs)(v,{children:[Object(a.jsx)(M,{images:f,selectedTab:l,onChangeSelectedTab:function(e){return function(e){d(e)}(e)},onChangeSearchQuery:function(e){return w(e)}}),!I&&Object(a.jsx)(Z,{visible:!Q,onBecomeVisible:function(){return G()}})]})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},ce=n(144),re=n(72),ie=Object(re.a)({typography:{useNextVariants:!0},palette:{type:"light",primary:{main:"#7e57c2"},secondary:{main:"#ec407a"},success:{main:"#00B294"},background:"#f5f5f5",error:{main:"#E81123"},contrastThreshold:3,tonalOffset:.2,contrastText:"#fff",text:{primary:"#333"}}});o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ce.a,{theme:ie,children:Object(a.jsx)(ne,{})})}),document.getElementById("root")),ae()},85:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.d6d62338.chunk.js.map